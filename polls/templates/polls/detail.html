{% extends 'polls/base.html' %}

{% block content %}
<header>{{ poll.question }} by {{poll.author}}</header>
<section>
{%if error_message%}
<p><strong>{{error_message}}</strong></p>
{%endif%}
<form method='POST' action='{% url "vote" pk=poll.pk %}'>
{% csrf_token %}
{% for choice in poll.choice_set.all %}
<input type='radio' name='choice' id='choice{{choice.id}}' value='{{choice.pk}}' />
<label for='choice{{choice.id}}'>{{choice.choice}}</label>
<br>
{% endfor %}
{% if user.is_authenticated %}
<input type='radio' name='choice' id='new' value='newchoice' />
<label for='newchoice'>Add new option:</label>
<br>
<input type='text' id='newchoice' name='newchoice' placeholder='Enter your opinion' />
{% endif %}
<button type='submit'>Vote</button>
</form>
</section>
<div>
<canvas id="myChart" width="400" height="400"></canvas>
</div>
{% endblock %}
{% block js %}
{% load staticfiles %}
<script type="text/javascript">
choices=JSON.parse('{{choices|safe}}');
votes=JSON.parse('{{votes}}');
</script>
<script src='{% static "js/chart.min.js" %}'></script>
<script src='{% static "js/detail.js" %}'></script>

{% endblock %}